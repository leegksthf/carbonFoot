<body>
	<div class="signUp-wrap">
		<div class="header">
			<a href="javascript:window.history.back();">
				<i class="fas fa-chevron-left"></i>
			</a>
			<span>회원가입</span>
		</div>
		<form>
		<div class="inputInfo">
			<div class="id-wrap">
				<p class="nameText">이름</p>
				<input type="text" name="name" class="inputName" placeholder="이름을 입력해주세요" />
			</div>
			<div class="id-wrap">
				<p class="idText">아이디</p>
				<div class="inputId-wrap">
					<input type="text" id="Id" class="inputId" placeholder="아이디를 입력해주세요(6자 이상)" />
					<button class="idChkBtn">중복확인</button>
				</div>
			</div>
			<div class="pw-wrap">
				<p class="pwText">비밀번호</p>
				<input type="password" name="password1" class="inputPw" placeholder="숫자,영문,특수문자 포함 8자 이상" />
			</div>
			<div class="pwCheck-wrap">
				<p class="pwCheckText">비밀번호 확인</p>
				<input type="password" name="password2" class="inputPwCheck" placeholder="비밀번호를 한 번 더 입력해주세요" />
			</div>
			<div class="tel-wrap">
				<p class="telText">휴대폰 번호</p>
				<div class="inputTel-wrap">
					<input type="text" id="phone" class="inputTel" placeholder="ex) 01012341234" />
					<button class="codeBtn">인증번호 받기</button>
				</div>
			</div>
			<div class="age-wrap">
				<p class="ageText">나이</p>
				<input type="number" name="age" class="inputAge" placeholder="숫자만 입력해주세요" />
			</div>

		</div>

		<div class="agree-wrap">
			<ul>
				<li>
					<div class="chkAll chkAndtitle">
						<input type="checkbox" id="chkAll" name="chkAll" class="chkAllBtn" />
						<p class="termTitle">약관 전체동의</p>
					</div>
				</li>
				<li class="term">
					<div class="chkAndtitle">
						<input type="checkbox" id="chk" name="chk" class="agreeBtn" />
						<p class="termTitle essential-term">개인정보 수집 및 이용 동의서</p>
					</div>
					<button>
						<i class="fas fa-chevron-right modal-custom-button" href="#myModal1"></i>
					</button>
				</li>

				<li class="term">
					<div class="chkAndtitle">
						<input type="checkbox" id="chk" name="chk" class="agreeBtn" />
						<p class="termTitle essential-term">마케팅 활용 목적 개인정보 수집 동의</p>
					</div>
					<button>
						<i class="fas fa-chevron-right modal-custom-button" href="#myModal2"></i>
					</button>
				</li>

				<li class="term">
					<div class="chkAndtitle">
						<input type="checkbox" id="chk" name="chk" class="agreeBtn" />
						<p class="termTitle option-term">제3자 정보 제공 동의</p>
					</div>
					<button>
						<i class="fas fa-chevron-right modal-custom-button" href="#myModal3"></i>
					</button>
				</li>
			</ul>
		</div>
		<div class="termWarn">
			<p>동의를 거부 할 수 있지만 필수항목 동의 거부 시에는 회원가입이 제한됩니다.</p>
		</div>

		<div class="signUpSuccess">
			<button type="submit" id="success" disabled="disabled">회원가입</button>
		</div>
		</form>
	</div>

	<!-- 모달 -->
	<div id="myModal1" class="modal-custom">

		<!-- 모달내용 -->
		<div class="modal-content">
			<div class="modal-header">
				<h4>이용동의</h4>
			</div>
			<div class="modal-body">
				<p>111내용입니다</p>
				<p>내용내용</p>
			</div>
			<div class="close-modal">닫기</i>
			</div>
		</div>
	</div>

	<!-- 모달 -->
	<div id="myModal2" class="modal-custom">

		<!-- 모달내용 -->
		<div class="modal-content">
			<div class="modal-header">
				<h4>마케팅 활용 동의</h4>
			</div>
			<div class="modal-body">
				<p>222내용입니다</p>
				<p>내용내용</p>
			</div>
			<div class="close-modal">닫기</i>
			</div>
		</div>
	</div>

	<!-- 모달 -->
	<div id="myModal3" class="modal-custom">

		<!-- 모달내용 -->
		<div class="modal-content">
			<div class="modal-header">
				<h4>개인정보 수집 이용동의</h4>
			</div>
			<div class="modal-body">
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
				<p>333내용입니다</p>
				<p>내용내용</p>
			</div>
			<div class="close-modal">닫기</i>
			</div>
		</div>
	</div>

	<script>
		$(document).ready(function () {
			$("#chkAll").click(function () {
				if ($("#chkAll").is(":checked"))
					$("input[name=chk]").prop("checked", true);
				else
					$("input[name=chk]").prop("checked", false);
			});
			$("input[name=chk]").click(function () {
				var total = $("input[name=chk]").length;
				var checked = $("input[name=chk]:checked").length;
				if (total != checked)
					$("#chkAll").prop("checked", false);
				else
					$("#chkAll").prop("checked", true);
			});
		});

		var btn = document.querySelectorAll(".modal-custom-button");
		var modals = document.querySelectorAll('.modal-custom');
		var exitBtns = document.getElementsByClassName("close-modal");

		for (var i = 0; i < btn.length; i++) {
			btn[i].onclick = function (e) {
				e.preventDefault();
				modal = document.querySelector(e.target.getAttribute("href"));
				modal.style.display = "block";
			}
		}

		for (var i = 0; i < exitBtns.length; i++) {
			exitBtns[i].onclick = function () {
				for (var index in modals) {
					if (typeof modals[index].style !== 'undefined')
						modals[index].style.display = "none";
				}
			}
		}

		window.onclick = function (event) {
			if (event.target.classList.contains('modal-custom')) {
				for (var index in modals) {
					if (typeof modals[index].style !== 'undefined')
						modals[index].style.display = "none";
				}
			}
		}

		// $('#chkAll').change(function () { 	$(this).prop('checked') ?
		// $('#success').removeAttr('disabled'):$('#success').attr('disabled','disabled');
		// });

		$('#chkAll').click(function () {
			var chkAll = $("#chkAll").prop("checked");
			if (chkAll) {
				$("#success").prop("disabled", false);
				$("#success").addClass("active");
			} else {
				$('#success').prop("disabled", true);
				$("#success").removeClass("active");
			}
		});

		var nameToken = false
		var emailToken = false
		var phoneToken = false

		const idReg = /^[a-z0-9]{4,20}$/;
		const emailReg = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
		const regExp = /^01([0|1|6|7|8|9]?)-?([0-9]{3,4})-?([0-9]{4})$/;

		const name = document.getElementById('name');
		const email = document.getElementById('email');
		const phone = document.getElementById('phone');

		name.onkeyup = () => {
			if (!idReg.test(document.getElementById('name').value)) {
				document.getElementById('nameError').innerText = "아이디는 영 소문자, 숫자 4~20자리로 입력해주세요."
				document.getElementById('nameError').style.color = 'red'
				nameToken = false;
			} else {
				nameToken = true;
			}
		}

		phone.onkeyup = () => {
			if (!regExp.test(document.getElementById('phone').value)) {
				document.getElementById('phoneError').innerText = '올바른 휴대폰 번호를 입력해주세요.'
				document.getElementById('phoneError').style.color = 'red'
				phoneToken = false;
			} else {
				phoneToken = true;
			}
		}
	</script>
</body>